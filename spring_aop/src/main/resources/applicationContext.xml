<?xml version="1.0" encoding="UTF-8"?>
    
    <beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd


    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/aop
    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">
    
<!-- <aop:aspectj-autoproxy/> -->
<!-- monitoMe is the bean we will monitor -->
<bean id="monitorMe" class="org.automon.spring_aop.MonitorMe"/>

<!-- <bean id="automonSpringAspect" class="org.automon.spring_aop.AutomonSpringAspect"/> -->
  <bean id="automonSpringAspect" class="org.automon.spring_aop.AutomonSpringAspect2"/>

<!-- Link the bean to the JamonAspect so it is monitored.  Here we will simply specify the beanId.
 There are many ways to do this using aspectJ pointcut syntax.  For example annotations or packages
 can be specified.You can also use the '||' conditional to
 monitor many beans. Example: expression="bean(monitorMe4) || bean(monitorMe3)"/>
-->
<!--
<aop:config>
   <aop:pointcut id="jamonMonitoringPointcut" expression="bean(monitorMe)"/>
   <aop:aspect id="jamonSpringAspect2" ref="jamonAspect">
       <aop:around pointcut-ref="jamonMonitoringPointcut" method="monitor"/>
   </aop:aspect>
</aop:config>
-->
    <aop:config>
        <aop:pointcut id="monitoredMethods"  expression="execution(* org.automon.spring_aop.MonitorMe.*(..))"/>
        <aop:pointcut id="exceptionTrackedMethods"  expression="execution(* org.automon.spring_aop.MonitorMe.*(..))"/>

        <aop:aspect id="automonAspect" ref="automonSpringAspect">
            <aop:around pointcut-ref="monitoredMethods" method="monitor"/>  
            <aop:after-throwing pointcut-ref="exceptionTrackedMethods" method="throwing" throwing="exceptionArg"/>
        </aop:aspect>        
    </aop:config>

</beans>

